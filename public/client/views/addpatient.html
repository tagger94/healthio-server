<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Add Patient</title>
</head>

<body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <h1 align="center">Add Patient</h1>
    <hr>
    Patient Name: <input id="textInName" type="text" name="valid"><br>
    Patient ID: <input id="textInID" type="text" name="valid"><br>
    City: <input id="textCity" type="text" name="valid"><br>
    State: <input id="textState" type="text" name="valid"><br>
    Street: <input id="textStreet" type="text" name="valid"><br>
    Zip: <input id="textZip" type="text" name="valid"><br>
    Date of Birth: <input id="textDOB" type="text" name="valid"><br>
    Gender: <input id="textGender" type="text" name="valid"><br>
    Height: <input id="textHeight" type="text" name="valid"><br>
    Weight: <input id="textWeight" type="text" name="valid"><br>
    Insurance: <input id="textInsurance" type="text" name="valid"><br>
    Insurance Location: <input id="textInsLocation" type="text" name="valid"><br>
    Insurance Provider: <input id="textInsProvider" type="text" name="valid"><br>
    <input id="createButton" type="button" value="Create">
    
    <script type="text/javascript">
        
        var hasConnected = 0;
        var socket = io('/admin');
        socket.on('connect', function() {
            // socket.emit('request patient list', "");

            // socket.once('patient list', usePatientList)
            if (!hasConnected) {
                hasConnected = 1;
                document.getElementById("createButton").onclick = addPatient;
            }
        })
        
        function addPatient(){
            //Firebase
            //FB.createPatient(m.pid, m.city, m.state, m.street, m.zip, m.name, m.dob, m.gender, m.height, m.weight, m.insurance, m.location, m.provider);
            var m = [];
            var name = document.getElementById("textInName").value;
            m.push(name);
            var id = document.getElementById("textInID").value;
            m.push(id);
            var city = document.getElementById("textCity").value;
            m.push(city);
            var state = document.getElementById("textState").value;
            m.push(state);
            var street = document.getElementById("textStreet").value;
            m.push(street);
            var p_zip = document.getElementById("textZip").value;
            m.push(p_zip);
            var p_dob = document.getElementById("textDOB").value;
            m.push(p_dob);
            var gender = document.getElementById("textGender").value;
            m.push(gender);
            var p_height = document.getElementById("textHeight").value;
            m.push(p_height);
            var p_weight = document.getElementById("textWeight").value;
            m.push(p_weight);
            var p_ins = document.getElementById("textInsurance").value;
            m.push(p_ins);
            var p_ins_loc = document.getElementById("textInsLocation").value;
            m.push(p_ins_loc);
            var p_ins_pro = document.getElementById("textInsProvider").value;
            m.push(p_ins_pro);
            
            //Add patient with server FB call
            
            //UI
            // names.push(name);
            // patientID.push(id);
            
            alert("-Created Patient-\nName: " + name + "\nPID: " + id);
        }
        
        
        
        
        
        
        // var patientData = [];
        // var names = [];
        // var labels = [];
        // var patientID = [];
        // var hasConnected = 0;

        // function usePatientList(patientList) {

        // console.print(patientList);
        //     initArrays(patientList);

        //     if (!hasConnected) {
        //         hasConnected = 1;
        //         document.getElementById("viewDataButton").onclick = viewPatientData_PID;
        //         document.getElementById("createButton").onclick = addPatient;
        //         drawList();
        //     }
        // }
        
        // function initArrays(patientList){
        //     //List of patient IDs.
        //     for (var i in patientList) {
        //         patientID.push(i);
        //     }

        //     //List of patient dat labels.
            
        //     //Add a lable for d3 table.
        //     labels.push("p_ID")
        //     for (var i in patientList[patientID[0]]) {
        //         labels.push(i);
        //     }

            
        //     var rowOfData = [];

        //     // Fill Patients
        //     for (var patient in patientList) {
        //         var patientDataList = patientList[patient];

        //         //Reset
        //         rowOfData = [];
        //         for (var listElement in patientDataList) {
        //             var dataLabels = patientDataList[listElement];

        //             rowOfData.push(dataLabels);
        //         }
        //         patientData.push(rowOfData);
        //     }

        //     //Array of names
        //     for (var i = 0; i < patientData.length; i++) {
        //         names.push(patientData[i][7]);
        //     }
        // }
        
        
        
        
    </script>
</body>

    
</html>
    